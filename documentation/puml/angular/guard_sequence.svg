<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="596px" preserveAspectRatio="none" style="width:1861px;height:596px;" version="1.1" viewBox="0 0 1861 596" width="1861px" zoomAndPan="magnify"><defs><filter height="300%" id="f1x3hcr01yib75" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1x3hcr01yib75)" height="132.8867" style="stroke:#000000;stroke-width:2.0;" width="1459" x="388" y="361.6621"/><rect fill="#FFFFFF" height="28.9551" style="stroke:none;stroke-width:1.0;" width="1459" x="388" y="465.5938"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="203" x2="203" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="473" x2="473" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="629" x2="629" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="997.5" x2="997.5" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1120" x2="1120" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1246" x2="1246" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1429" x2="1429" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1620" x2="1620" y1="88.4883" y2="511.5488"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1774" x2="1774" y1="88.4883" y2="511.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="5" y="85.5352">User</text><ellipse cx="23.5" cy="15" fill="#FEFECE" filter="url(#f1x3hcr01yib75)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,23 L23.5,50 M10.5,31 L36.5,31 M23.5,50 L10.5,65 M23.5,50 L36.5,65 " fill="none" filter="url(#f1x3hcr01yib75)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="5" y="524.084">User</text><ellipse cx="23.5" cy="537.0371" fill="#FEFECE" filter="url(#f1x3hcr01yib75)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,545.0371 L23.5,572.0371 M10.5,553.0371 L36.5,553.0371 M23.5,572.0371 L10.5,587.0371 M23.5,572.0371 L36.5,587.0371 " fill="none" filter="url(#f1x3hcr01yib75)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="177" x="113" y="36.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="181.5" y="57.0469">«URL»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="163" x="120" y="73.5352">/documents/collections</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="177" x="113" y="510.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="181.5" y="531.084">«URL»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="163" x="120" y="547.5723">/documents/collections</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="147" x="398" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="405" y="73.5352">AppRoutingModule</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="147" x="398" y="510.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="405" y="531.084">AppRoutingModule</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="137" x="559" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="566" y="73.5352">AuthGuardService</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="137" x="559" y="510.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="566" y="531.084">AuthGuardService</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="50" x="970.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="977.5" y="73.5352">Store</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="50" x="970.5" y="510.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="977.5" y="531.084">Store</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="81" x="1078" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1085" y="73.5352">AuthState</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="81" x="1078" y="510.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1085" y="531.084">AuthState</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="142" x="1173" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1180" y="73.5352">DocumentsModule</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="142" x="1173" y="510.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1180" y="531.084">DocumentsModule</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="196" x="1329" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="1336" y="73.5352">DocumentsRoutingModule</text><rect fill="#FEFECE" filter="url(#f1x3hcr01yib75)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="196" x="1329" y="510.5488"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="1336" y="531.084">DocumentsRoutingModule</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1539" y="85.5352">CollectionsComponent</text><ellipse cx="1620.5" cy="56" fill="#FEFECE" filter="url(#f1x3hcr01yib75)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1616.5,44,1622.5,39,1620.5,44,1622.5,49,1616.5,44" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1539" y="524.084">CollectionsComponent</text><ellipse cx="1620.5" cy="543.0371" fill="#FEFECE" filter="url(#f1x3hcr01yib75)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1616.5,531.0371,1622.5,526.0371,1620.5,531.0371,1622.5,536.0371,1616.5,531.0371" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1712" y="85.5352">LoginComponent</text><ellipse cx="1774.5" cy="56" fill="#FEFECE" filter="url(#f1x3hcr01yib75)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1770.5,44,1776.5,39,1774.5,44,1776.5,49,1770.5,44" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1712" y="524.084">LoginComponent</text><ellipse cx="1774.5" cy="543.0371" fill="#FEFECE" filter="url(#f1x3hcr01yib75)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1770.5,531.0371,1776.5,526.0371,1774.5,531.0371,1776.5,536.0371,1770.5,531.0371" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="995.5" x2="985.5" y1="132.4541" y2="128.4541"/><line style="stroke:#A80036;stroke-width:1.0;" x1="629.5" x2="996.5" y1="132.4541" y2="132.4541"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="344" x="636.5" y="127.7119">select(selectIsAuthenticated) &lt;&lt;async subscription&gt;&gt;</text><path d="M1002,103.4883 L1002,143.4883 L1292,143.4883 L1292,113.4883 L1282,103.4883 L1002,103.4883 " fill="#FBFB77" filter="url(#f1x3hcr01yib75)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1282,103.4883 L1282,113.4883 L1292,113.4883 L1282,103.4883 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="1008" y="121.0566">This ngrx select will be invoked each time</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="1012" y="136.3672">the store changes its value</text><polygon fill="#A80036" points="1108.5,170.4199,1118.5,174.4199,1108.5,178.4199,1112.5,174.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="997.5" x2="1114.5" y1="174.4199" y2="174.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1004.5" y="169.6777">isAuthenticated</text><polygon fill="#A80036" points="1008.5,184.4199,998.5,188.4199,1008.5,192.4199,1004.5,188.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1002.5" x2="1119.5" y1="188.4199" y2="188.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="629.5" x2="639.5" y1="202.4199" y2="198.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="629.5" x2="996.5" y1="202.4199" y2="202.4199"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="629.5" x2="671.5" y1="231.7305" y2="231.7305"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="671.5" x2="671.5" y1="231.7305" y2="244.7305"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="630.5" x2="671.5" y1="244.7305" y2="244.7305"/><polygon fill="#A80036" points="640.5,240.7305,630.5,244.7305,640.5,248.7305,636.5,244.7305" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="636.5" y="226.9883">setIsAuthenticated</text><polygon fill="#A80036" points="191.5,270.041,201.5,274.041,191.5,278.041,195.5,274.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="197.5" y1="274.041" y2="274.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="30.5" y="269.2988">Go to any page in MuRET</text><polygon fill="#A80036" points="461.5,299.3516,471.5,303.3516,461.5,307.3516,465.5,303.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="467.5" y1="303.3516" y2="303.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="210.5" y="298.6094">search route starting with "documents"</text><polygon fill="#A80036" points="617.5,328.6621,627.5,332.6621,617.5,336.6621,621.5,332.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="473.5" x2="623.5" y1="332.6621" y2="332.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="480.5" y="327.9199">canActivate</text><polygon fill="#A80036" points="484.5,342.6621,474.5,346.6621,484.5,350.6621,480.5,346.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="478.5" x2="628.5" y1="346.6621" y2="346.6621"/><path d="M388,361.6621 L450,361.6621 L450,368.6621 L440,378.6621 L388,378.6621 L388,361.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="132.8867" style="stroke:#000000;stroke-width:2.0;" width="1459" x="388" y="361.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="403" y="375.2305">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="465" y="374.2969">[User has permissions]</text><polygon fill="#A80036" points="1234,396.2832,1244,400.2832,1234,404.2832,1238,400.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="473.5" x2="1240" y1="400.2832" y2="400.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="480.5" y="395.541">&lt;&lt;forward request&gt;&gt;</text><polygon fill="#A80036" points="1417,425.5938,1427,429.5938,1417,433.5938,1421,429.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1246" x2="1423" y1="429.5938" y2="429.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1253" y="424.8516">search route /collections</text><polygon fill="#A80036" points="1257,439.5938,1247,443.5938,1257,447.5938,1253,443.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1251" x2="1428" y1="443.5938" y2="443.5938"/><polygon fill="#A80036" points="1608.5,453.5938,1618.5,457.5938,1608.5,461.5938,1612.5,457.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1246" x2="1614.5" y1="457.5938" y2="457.5938"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388" x2="1847" y1="466.5938" y2="466.5938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="393" y="477.2285">[User has not permissions]</text><polygon fill="#A80036" points="1762.5,482.5488,1772.5,486.5488,1762.5,490.5488,1766.5,486.5488" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="473.5" x2="1768.5" y1="486.5488" y2="486.5488"/><!--MD5=[be27eeb93573c27ee2b26ebf0c8ec3cb]
@startuml guard_sequence
actor User
participant "/documents/collections" as urlCollections <<URL>>
participant AppRoutingModule

AuthGuardService -\\ Store: select(selectIsAuthenticated) <<async subscription>>
note right: This ngrx select will be invoked each time \n the store changes its value
Store -> AuthState: isAuthenticated
return
Store -\\ AuthGuardService
AuthGuardService - -> AuthGuardService: setIsAuthenticated
 
User -> urlCollections: Go to any page in MuRET
urlCollections -> AppRoutingModule: search route starting with "documents"
AppRoutingModule -> AuthGuardService: canActivate
return

alt User has permissions
    AppRoutingModule - -> DocumentsModule: <<forward request>>
    DocumentsModule - -> DocumentsRoutingModule: search route /collections
    return
    control CollectionsComponent
    DocumentsModule - -> CollectionsComponent
else User has not permissions
    control LoginComponent
    AppRoutingModule - -> LoginComponent
end
@enduml

PlantUML version 1.2020.22(Sun Dec 06 10:36:27 CET 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: es
Country: ES
--></g></svg>