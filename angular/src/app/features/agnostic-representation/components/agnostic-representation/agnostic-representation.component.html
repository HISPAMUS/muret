<div class="container-fluid">
  <!-- menu -->
  <div class="row">
    <nav class="col-1">
      <div>
        <h5>{{ filename$ | async}}</h5>
        <app-crud-toolbar [(mode)]="mode" (modeChange)="onModeChange($event)" (onDelete)="deleteSelectedSymbol()">
        </app-crud-toolbar>

        <form>
          <div [hidden]="!isEditingMode() && !isAddingMode()" class="btn-group-vertical btn-group-toggle" ngbRadioGroup
               name="addMethodRadioButtonGroup" [(ngModel)]="addMethodType">
            <label class="btn-light" ngbButtonLabel>
              <input ngbButton type="radio" name="addMethodRadioButton" [value]="'boundingbox'"> Bounding box
            </label>
            <label class="btn-light" ngbButtonLabel>
              <input ngbButton type="radio" name="addMethodRadioButton" [value]="'strokes'"> Strokes
            </label>

          </div>
        </form>

      </div>
      <br>
      <br>
      <button (click)="openDocumentAnalysis()">Document analysis</button>
      <button (click)="openSemanticRepresentation()" disabled>Semantic representation</button>
    </nav>

    <div class="col-11">
      <div *ngIf="selectedRegion$ | async as selectedRegion; else noRegionSelected">
        <aside>
          <button (click)="zoomOut()"><fa-icon icon="search-minus"></fa-icon></button>
          <button (click)="zoomIn()"><fa-icon icon="search-plus"></fa-icon></button>
          <button (click)="zoomFit()"><fa-icon icon="expand"></fa-icon></button>
        </aside>
        <section class="row">
          <div class="col">
            <app-image [imageID]="imageID" [shapes]="selectedRegionShapes"
                       [zoomFactor]="selectedRegionZoomFactor"
                       [crop]="selectedRegion.boundingBox"
                       (svgShapeCreated)="onSymbolCreated($event)"
                       (svgShapeChanged)="onSymbolShapeChanged($event)"
                       [nextShapeToDraw]="nextShapeToDraw"
                       [(mode)]="mode"
                       [(selectedShapeID)]="selectedShapeID"
            ></app-image>
          </div>
        </section>
        <section class="row">
          <div class="col">
            Selected symbol ID: {{selectedSymbol?.id}}
          </div>
        </section>
        <section class="row">
          <div class="col">
            <app-agnostic-staff
                                [regionCropped]="selectedRegion.boundingBox"
                                [mode]="mode" [svgAgnosticSymbolSet]="svgSet$ | async"
            >
            </app-agnostic-staff>
          </div>
        </section>
      </div>
      <ng-template #noRegionSelected>
        <div class="jumbotron align-content-md-center" id="jumbotronSelectRegion">
          <p>Select a region</p>
        </div>
      </ng-template>
      <section class="row">
        <div class="col">
          <app-agnostic-toolbar *ngIf="isAddOrEditMode()"
                                [mode]="mode" [classifier]="classifier" (classifierChanged)="onClassifierChanged($event)"
                                [svgAgnosticSymbolSet]="svgSet$ | async"
                                (agnosticSymbolTypeSelected)="onAgnosticSymbolTypeSelected($event)"
                                [selectedAgnosticSymbolType]="selectedAgnosticSymbolType"
                                (pitchDown)="movePitchDownSelectedSymbol()"
                                (pitchUp)="movePitchUpSelectedSymbol()">
          </app-agnostic-toolbar>
          <!-- [agnosticSymbolToolbarCategories]="agnosticSymbolToolbarCategories"-->
        </div>
      </section>
      <section class="row">
        <div class="col">
          <app-image [imageID]="imageID" [shapes]="imagePreviewShapes" [zoomFactor]="imagePreviewZoomFactor"
                     [(selectedShapeID)]="selectedRegionShapeID"
                     [mode]="'eSelecting'">
          </app-image>
        </div>
      </section>

    </div>
  </div>
</div>
