<div class="container-fluid" *ngIf="imageOverview && (loadedImage$ | async) as loadedImage">
  <div class="row">
    <aside class="col-3"  id="leftColumn">  <!-- left column -->
      <div id="imageNavigator" [ngClass]="imageNavigatorHeight">
        <!--<h3 class="text-center">{{imageOverview.filename}}</h3>-->
        <p id="doubleClickBBoxes">Double click for changing the bounding boxes</p>
        <app-image-recognition-toolbar [zoomManager]="zoomManager" [hideModeButtons]="true"></app-image-recognition-toolbar>
        <app-image-document-analysis-navigator
          [loadedImage]="loadedImage"
          [regionTypes]="regionTypes$ | async"
          [shapes]="documentAnalysisShapes"
          [zoomManager]="zoomManager"
          [singleSelectionMode]="true"
          [mode]="'eSelecting'"
          (onShapesSelected)="onRegionShapeSelected($event)"
          (onSvgShapeChanged)="onRegionShapeChanged($event)"
        ></app-image-document-analysis-navigator>
        <div class="changeLeftLayout d-flex align-items-center justify-content-center">
          <a (click)="toggleLeftLayout()">{{changeLeftLayoutLabel}}</a>
        </div>
      </div>
      <hr>
      <div id="tools" [ngClass]="toolsHeight">
        <app-transcription-tools [svgSet]="svgSet$ | async"></app-transcription-tools>
      </div>
    </aside> <!-- left column -->
    <div class="col-9"> <!-- right column -->
      <!-- phases are shown in the region preview -->
      <ng-container *ngIf="selectedRegion$ | async as selectedRegion; else noSelectedRegion">
        <container-element [ngSwitch]="regionInteractionType">
          <ng-container *ngSwitchCase="'Music'">
            <app-music-agnostic-representation
              [imageID]="imageID"
              [region]="selectedRegion"
              [loadedImage]="loadedImage"
              [svgSet]="svgSet$ | async"
            >
            </app-music-agnostic-representation>
            <app-music-region-semantic-representation
              [region]="selectedRegion">
            </app-music-region-semantic-representation>
          </ng-container>

          <ng-container *ngSwitchCase="'Text'">
            <app-text-region-agnostic-representation></app-text-region-agnostic-representation>
            <app-text-region-semantic-representation></app-text-region-semantic-representation>
          </ng-container>

          <ng-container *ngSwitchCase="'Chord'">
            <p> Chord regions not supported yet</p>
          </ng-container>
        </container-element>
      </ng-container>

      <ng-template #noSelectedRegion> <!-- when a region is shown, the phases are shown in RegionPreviewComponent -->
        <div class="d-flex justify-content-between">
          <div>
            <h3>Transcription phase</h3>
            <p>Select a region to transcribe</p>
          </div>
          <app-document-phases [selectedPhase]="'transcription'" [imageID]="imageID"  [size]="'lg'"></app-document-phases>
        </div>
      </ng-template>

    </div>  <!-- right column -->
  </div> <!-- row -->
</div>

<div id="statusImageData">
  <span>Image ID: {{imageID}}</span> | <span *ngIf="selectedRegion$ |async as region">Selected region ID: {{region.id}}</span>
</div>

<!-- Positioned absolute -->
<app-progress-status (statusChange)="onStatusChange($event)" [(status)]="status"></app-progress-status>
